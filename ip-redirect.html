<!DOCTYPE html>
<html lang="fa">
<head>
  <meta charset="UTF-8">
  <title>در حال بررسی IP...</title>
  <script>
    async function checkIP() {
      try {
        const ipResponse = await fetch("https://api.ipify.org?format=json");
        const ipData = await ipResponse.json();
        const userIP = ipData.ip;

        // لیست آی‌پی‌ها از فایل JSON
        const allowedResponse = await fetch("allowed-ips.json");
        const allowedList = await allowedResponse.json();

        if (allowedList.allowed_ips.includes(userIP)) {
          // آی‌پی مجاز است
          window.location.href = "https://hadidadkhodaei.ir/config.html";
        } else {
          // آی‌پی مجاز نیست
          document.body.innerHTML = `
            <h2>ورود غیرمجاز ❌</h2>
            <p>آی‌پی شما در لیست مجاز نیست: ${userIP}</p>
          `;
        }
      } catch (error) {
        document.body.innerHTML = `<h2>خطا در بررسی آی‌پی</h2><p>${error}</p>`;
      }
    }

    checkIP();
  </script>
</head>
<body>
  <h2>در حال بررسی آی‌پی شما...</h2>
</body>
</html>
